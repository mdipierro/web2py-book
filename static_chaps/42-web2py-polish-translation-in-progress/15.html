<h2>Pomoc dla web2py: błędy, ulepszenia i dokumentacja</h2><p>Projekt web2py jest bardzo przyjazny wobec zgłaszania błędów, ulepszania dokumentacji i poprawek.</p><h3>Grupa Google</h3><p>Główne forum dla omawiania błędów i nowych funkcjonalności, to: <a href="https://groups.google.com/forum/#!forum/web2py">web2py-users</a> (Adres URL to <code>https://groups.google.com/forum/#!forum/web2py</code>)</p><h3>Zgłaszanie błędów poprzez Google Code</h3><p>Po znalezieniu błędu i omówieniu go na grupie, trzeba wypełnić raport błędów przez utworzenie 'Issue' na Google Code <a href="http://code.google.com/p/web2py/issues">http://code.google.com/p/web2py/issues</a>/</p><h3>Raportowanie błędów bezpieczeństwa</h3><div class="inxx">reporting security bugs</div><p>Podczas zgłaszania błędów bezpieczeństwa trzeba zachować ostrożność, aby nie ujawnić informacji, które mogłyby się przyczynić do  szkodliwego wykorzystania kodu. Po wysłaniu informacji na grupę Google lub postawieniu problemu na stronie Google Code, skontaktujemy się z Tobą przez programistę w celu prywatnej wymiany informacji.</p><h2>Współtworzenie kodu i zmiany w dokumentacji</h2><h3>Jak zarządzany jest projekt?</h3><p>Podstawowy kod web2py jest zarządzny w repozytorium git na GitHub. Oryginalnym systemem kontroli wersji był Mercurial na Google Code, ale obecnie projekt tworzony jest na GitHub. Kod web2py ma dwie ważne wersje: bieżącą stabilną wersję i migawkę rozwojową. W repozytorium git migawka rozwojowa zwykle określana jest jako "master", która w projekcie web2py jest gałęzią główną odpowiadajacą gałęzi "trunk" z Mercurial. Poprawki błędów i ulepszenia przekazywane są do gałęzi głównej, tak więc, aby szybko skorzystać z poprawek błędów należy wykorzystać gałąź główną. Najlepszym sposobem jest sklonowanie repozytorium git. Jest to pierwszy krok przy wykorzystaniu kodu przechowywanego na GitHub. Kod ten jest dobrze udokumentowany. Ponieważ poszczególne wydania są etykietowane, to łatwo jest się przełączać pomiędzy gałęzią główna (którą jest 'master') a bieżącymi wydaniami. Sprawia to, że repozytorium git jest bardzo praktyczne.</p><p>Niezbędne będą następujące podstawowe umiejętności w posługiwaniu się repozytorium git:</p><ol><li>klonowanie repozytorium hostowanego na GitHub;</li><li>sprawdzanie gałęzi master;</li><li>sprawdzanie gałęzi ze etykietą.</li></ol><p>Jest to też omówione w poradnikach o GitHub: patrz poniżej.</p><h3>Omawianie propozycji zmian</h3><p>If the change relates to a bug, the discussion will probably occur on the Issue on Google Code (see above). If the change relates to an enhancement, the developers' group is the best place initially: <a href="https://groups.google.com/forum/#!forum/web2py-developers">web2py-developers group</a> (URL is <code>https://groups.google.com/forum/#!forum/web2py-developers</code>)</p><p>Because web2py promises backwards compatibility for non-experimental features, accepting a change into the code base is a promise of maintenance to future users, and this is not a promise than can be made lightly. Less experienced users may discover via discussion that there is an existing method to achieve what they want; unfortunately, the documentation of power features sometimes lags (see improving the documentation below).</p><p>When you ready to submit a code change, discussion will probably move to the comments attached to the Pull Request (discussed below).</p><h3>Coding style</h3><div class="inxx">coding style</div><p>Generally, follow PEP8 coding style. <a href="http://www.python.org/dev/peps/pep-0008">http://www.python.org/dev/peps/pep-0008</a>/</p><p>There is specific guidance here: <a href="../01#markmin_web2py_style">web2py style</a></p><h3>Tips on setting up a development environment</h3><p>Chapter 13 has some tips on using various IDEs with web2py.</p><h3>Preparation: using GitHub</h3><div class="inxx">patches</div><div class="inxx">GitHub</div><p>Since web2py uses GitHub, the overall flow of changes goes like this:</p><ol><li>You create a clone of web2py on GitHub, which GitHub calls "forking".</li><li>You create a clone of your web2py 'fork' on your local machine (or wherever you want to make changes)</li><li>You push your changes back to your GitHub fork</li><li>You make a pull request via GitHub</li><li>If your pull request is accepted, your commit will be in the master branch of web2py.</li></ol><p>At the time of writing, the core git/GitHub techniques are covered here: <a href="https://help.GitHub.com/articles/fork-a-repo">https://help.GitHub.com/articles/fork-a-repo</a></p><p>However, you need to follow the instructions below on how to create patches which can be cleanly merged.</p><h3>Preparation: using travis with your GitHub fork</h3><div class="inxx">travis</div><p>web2py works with travis, a continuous integration testing service. This means that a commit will trigger all the integrated unit tests.</p><p>You can easily add travis to your own GitHub repository to avoid sending patches which will fail travis testing upstream.</p><p>Follow the instructions here: <a href="http://about.travis-ci.org/docs/user/getting-started">http://about.travis-ci.org/docs/user/getting-started</a>/</p><h3>The three parts of a good quality enhancement</h3><p>A high-quality enhancement has three parts:</p><ol><li>The code change</li><li>Testing for the new functionality</li><li>Updating the book (which is also maintained at GitHub)</li></ol><h3>Ensuring a clean patch: using the correct git branch technique</h3><div class="inxx">git</div><p>Using git properly is a little more complex in a shared project.</p><p>Here are the specific guidelines to make sure your pull request can be applied cleanly.</p><p>Firstly, make sure you have a remote repository setup which points to the main web2py GitHub repository. Your remote repository should be called upstream. You only need to do this once.</p><p>Adding an upstream repository is covered by the introductory GitHub article linked above, but in case you missed it, you can add upstream like this:</p><pre><code class="code">git remote add upstream https://GitHub.com/web2py/web2py/</code></pre><p>Next you need a branch name for your changes. git encourages lots of branch names, as specific as possible. For web2py, we recommend names like this:</p><ul><li>every bug-fixing commit should come from a branch named "issue/number_of_the_issue_on_google_code" (like issue/1684)</li><li>every enhancement commit should come in a branch named "enhancement/title_of_the_enhancement" (like enhancement/trapped_links)</li></ul><p>In your local environment, checkout the branch for your changes: Substitute CHANGE1 for your branch name.</p><pre><code class="code">git fetch upstream
git checkout -b CHANGE1 upstream/master</code></pre><p>... Make changes or cherry pick from another local branch. commit if necessary. When you are ready to send your local changes to your web2py fork:</p><pre><code class="code">git push origin CHANGE1</code></pre><p>&lt;TODO insert note about collapsing several commits into one commit&gt;</p><p>and now go the GitHub website, change to the new branch and do a pull request. GitHub has a "delete branch" button after your pull request is merged or closed. There can be no guarantees, but PRs are usually reviewed within a few days. Most people submitting patches as PRs also update either the issue report or enhancement thread.</p><h2>Adding tests</h2><div class="inxx">code tests</div><div class="inxx">unit tests</div><p>Unit tests should be added when an enhancement changes or adds functionality. Tests are python scripts contained in gluon/tests Copy the approach of existing tests. You will notice that tests often need to create something such as table, perform a test of the functionality and check the outcome, and then return the state do before the test (which in this case would mean dropping the table). There is a good reference to testing here: <a href="http://www.web2pyslices.com/slice/show/1691/help-developers-adding-tests-to-web2py">Web2pyslice 1691</a></p><p><a href="http://www.web2pyslices.com/slice/show/1691/help-developers-adding-tests-to-web2py">http://www.web2pyslices.com/slice/show/1691/help-developers-adding-tests-to-web2py</a></p><h3>Running tests</h3><p>You can run all tests:</p><code class="code">python web2py.py --run_system_tests</code><p>See the slice referenced above for more information, including running individual tests.</p><h3>Example unit test</h3><p>Writing tests is easy. This is an example from gluon/tests/test_dal.py You can see how the test extends a TestCase class. Note how a sufficiently complex table is added, the test performed and output validated, and then the database changes are torn down, leaving the campsite as clean as when you arrived.</p><pre><code class="code">class TestVirtualFields(unittest.TestCase):

    def testRun(self):
        db = DAL(DEFAULT_URI, check_reserved=['all'])
        db.define_table('tt', Field('aa'))
        db.commit()
        db.tt.insert(aa="test")
        class Compute:
            def a_upper(row): return row.tt.aa.upper()
        db.tt.virtualfields.append(Compute())
        assert db(db.tt.id&gt;0).select().first().a_upper == 'TEST'
        db.tt.drop()
        db.commit()</code></pre><h2>Aktualizacja książki</h2><div class="inxx">akualizacja ksiązki</div><p>Książka jest również rozwijana na GitHub i można stosować tą samą organizaje pracy. Kod źródłowy książki zawiera źródła w różnych językach, zlokalizowane w katalogu sources. Treść jest pisana w języku <a href="../05#markmin_markmin_syntax">markmin</a> . Książka jest aplikacją web2py. Może się okazać, że wygodniej jest wykonać fork książki z GitHub i sklonować go do lokalnego repozytorium w katalogu aplikacji instalacji. To sprawi, że łatwiej będzie przeglądać zmiany renderowane w przeglądarce.</p><h2>web2pyslices.com</h2><div class="inxx">web2pyslices.com</div><p>Witryna web2pyslices.com jest źródłem recept, fragmentów kodu i przykładów.</p>